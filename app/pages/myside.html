<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For You</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300&display=swap" rel="stylesheet">
    <style>
        /* Cassette music player styles */
        #musicPlayer {
            position: fixed;
            right: 38px;
            bottom: 38px;
            z-index: 20;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #cassetteWrap {
            width: 90px;
            height: 90px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #cassette {
            width: 80px;
            height: 80px;
            border-radius: 16px;
            background: #222;
            box-shadow: 0 4px 16px rgba(0,0,0,0.12);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            animation: cassette-spin 6s linear infinite;
        }
        #cassette img {
            width: 56px;
            height: 56px;
            border-radius: 10px;
            object-fit: cover;
            position: absolute;
            left: 12px;
            top: 12px;
        }
        #cassette .border {
            width: 80px;
            height: 80px;
            border: 2px solid #e91e63;
            border-radius: 16px;
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
        }
        @keyframes cassette-spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        #phaseList {
            transition:
                opacity 0.5s cubic-bezier(0.4,0,0.2,1),
                transform 0.5s cubic-bezier(0.4,0,0.2,1),
                max-height 0.6s cubic-bezier(0.4,0,0.2,1);
            opacity: 0;
            transform: translateY(-24px) scaleY(0.85);
            max-height: 0;
            overflow: hidden;
        }
        #phaseList.show {
            opacity: 1;
            transform: translateY(0) scaleY(1);
            max-height: 400px;
        }
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f8f8f8;
            font-family: 'Cormorant Garamond', serif;
        }
        .text-container {
            text-align: center;
            position: relative;
        }
        .message {
            font-size: 3.2rem;
            color: #1a1a1a;
            opacity: 0;
            transition: all 1.8s cubic-bezier(0.19, 1, 0.22, 1);
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            letter-spacing: 0.15em;
            font-weight: 300;
            text-transform: lowercase;
        }
        .message.visible {
            opacity: 1;
            transform: translate(-50%, -50%);
        }

        /* Phase transition overlay styles */
        #phaseTransition {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            width: 100vw; height: 100vh;
            z-index: 100;
            display: none;
            align-items: center;
            justify-content: center;
            background: var(--phase-color, #fff);
            transition: background 0.7s cubic-bezier(0.4,0,0.2,1), opacity 0.7s cubic-bezier(0.4,0,0.2,1);
            opacity: 0;
        }
        #phaseTransition.show {
            display: flex;
            opacity: 1;
        }
        .phase-title {
            font-family: 'Cormorant Garamond', serif;
            font-weight: 700;
            border-radius: 1.2em;
            box-shadow: 0 4px 24px rgba(0,0,0,0.12);
            transition: all 1.2s cubic-bezier(0.4,0,0.2,1);
        }
        .phase-title-fixed {
            position: fixed;
            left: 32px;
            top: 32px;
            z-index: 101;
            font-size: 1.2rem;
            padding: 0.3em 0.9em;
            background: rgba(0,0,0,0.22);
            color: #fff;
            pointer-events: none;
        }
        
        /* UPDATED: Phase Title Overlay with Center-to-Corner Animation */
        .phase-title-overlay {
            /* Initial state (Center) */
            font-size: 2.8rem;
            padding: 0.5em 1.2em;
            background: rgba(0,0,0,0.18);
            color: #fff;
            position: absolute;
            left: 50%; top: 50%;
            transform: translate(-50%, -50%) scale(1);
            z-index: 102;
            opacity: 1; /* Start visible */
            transition: 
                transform 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55), 
                font-size 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55),
                padding 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55),
                opacity 0.6s 0.6s ease-out, /* Fade out later */
                background 0.7s cubic-bezier(0.4,0,0.2,1),
                left 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55),
                top 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        /* Target state (matches the fixed title's location and style) */
        .phase-title-overlay.shrink-to-corner {
            font-size: 1.2rem; /* Matches .phase-title-fixed */
            padding: 0.3em 0.9em; /* Matches .phase-title-fixed */
            left: 32px; /* Moves to the corner X position */
            top: 32px; /* Moves to the corner Y position */
            transform: translate(0, 0) scale(1); /* No translation needed from 32px, 32px */
            background: rgba(0,0,0,0.22); /* Matches .phase-title-fixed */
            opacity: 0; /* Fade out as it reaches the corner, completing the illusion */
        }
    </style>
</head>
<body>
    <div id="musicPlayer">
        <div id="cassetteWrap">
            <div id="cassette">
                <img id="cover" src="https://upload.wikimedia.org/wikipedia/commons/6/6d/CassetteTape.jpg" alt="Music Cover">
                <div class="border"></div>
            </div>
        </div>
        <audio id="audioPlayer" controls style="margin-top:10px;width:90px;">
            <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
    </div>
    <div class="skip-controls" style="position:fixed;top:32px;right:40px;z-index:10;text-align:right;min-width:220px;">
        <button id="skipBtn" style="font-family:'Cormorant Garamond',serif;font-weight:700;font-size:1.2rem;padding:0.5em 1.2em;border:none;background:rgba(30,30,30,0.92);color:#fff;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.08);cursor:pointer;letter-spacing:0.12em;">SKIP</button>
        <div id="skipPhase" style="margin-top:0.3em;font-size:0.95rem;font-weight:400;color:#222;">SKIP TO <span id="nextPhaseName" style="font-weight:700;">Next Phase</span></div>
    <div id="phaseList" style="margin-top:1.1em;background:rgba(255,255,255,0.95);border-radius:10px;padding:0.7em 0.5em 0.7em 0.5em;box-shadow:0 2px 8px rgba(0,0,0,0.04);font-size:0.98rem;">
            </div>
    </div>
    <div class="text-container">
    <div class="message" data-phase="Starting">Hey there!!!</div>
    <div class="message" data-phase="Starting">Hope you are all good...</div>
    <div class="message" data-phase="Starting">You probably didnâ€™t expect this...</div>
    <div class="message" data-phase="Starting">But I wanted to make something for you.</div>
    <div class="message" data-phase="Starting">But This is optional.</div>
    <div class="message" data-phase="Starting">Something that tells you what I have been through.</div>
    <div class="message" data-phase="Starting">From how it all started...</div>

    <div class="message" data-phase="Kid Phase">I liked you since we were kids...</div>
    <div class="message" data-phase="Kid Phase">Playing together, having funâ€¦ those days were magical.</div>
    <div class="message" data-phase="Kid Phase">No one knew, not a single soul.</div>
    <div class="message" data-phase="Kid Phase">I liked you not just because of your face, but because of how I felt around you.</div>
    <div class="message" data-phase="Kid Phase">Being with you felt like I belonged.</div>
    <div class="message" data-phase="Kid Phase">Whenever I use to see you, my heart raced and stress went high.</div>

    <div class="message" data-phase="Truth Revealed Phase">Then VJ told you. That i liked you</div>
    <div class="message" data-phase="Truth Revealed Phase">I wished it never happened, but whatâ€™s done is done.</div>
    <div class="message" data-phase="Truth Revealed Phase">He also told you that other girls proposed to me, </div>
    <div class="message" data-phase="Truth Revealed Phase">but I rejected them all because of you.</div>

    <div class="message" data-phase="Fake Account Phase">Then came that Instagram account pretending to be "S"</div>
    <div class="message" data-phase="Fake Account Phase">You insulted yourself through that account, and I defended you fiercely.</div>
    <div class="message" data-phase="Fake Account Phase">When you revealed it was actually you, my heart raced again.</div>

    <div class="message" data-phase="Flirty / Fun Phase">After that, we started talking, teasing, flirtingâ€¦ cring things included ðŸ˜…</div>

    <div class="message" data-phase="Dark Phase">But after 7â€“8 months, you ghosted me.</div>
    <div class="message" data-phase="Dark Phase">I was desperate, insecure, messaging you like crazy.</div>
    <div class="message" data-phase="Dark Phase">You said, "Sorry, you deserve better."</div>
    <div class="message" data-phase="Dark Phase">Later I found out it was family pressure to studyâ€¦ I had assumed it back then.</div>
    <div class="message" data-phase="Dark Phase">I was shattered, in my darkest phase.</div>
    <div class="message" data-phase="Dark Phase">I decided I wouldnâ€™t get with anyone else. Even if another girl came, I wouldnâ€™t open my heart.</div>

    <div class="message" data-phase="Self-Blame / Reflection Phase">I was never angry at you.</div>
    <div class="message" data-phase="Self-Blame / Reflection Phase">I kept asking myself: what if I did things differently?</div>
    <div class="message" data-phase="Self-Blame / Reflection Phase">I blamed myself â€” maybe I pressured you, maybe I was too clingy, maybe I expected too much, maybe I wasnâ€™t the kind of love you wanted.</div>
    <div class="message" data-phase="Self-Blame / Reflection Phase">I thought I was weak, that I couldnâ€™t handle the pain.</div>
    <div class="message" data-phase="Self-Blame / Reflection Phase">But now I realize, it was a phase I had to go through to become stronger.</div>

    <div class="message" data-phase="Rebuilding Phase">Slowly, I started to rebuild myself.</div>
    <div class="message" data-phase="Rebuilding Phase">I focused on everything subject, my passions, my plans and my dreams.</div>
    <div class="message" data-phase="Rebuilding Phase">I read, I learn, I redirect.</div>
    <div class="message" data-phase="Rebuilding Phase">I learned tried to rewire myself, but the next step was the hardest...</div>

    <div class="message" data-phase="Letting Go / Sacrifice Phase">I had to let go of the past, of the pain, of you.</div>
    <div class="message" data-phase="Letting Go / Sacrifice Phase">It was hard, but I knew it was necessary.</div>
    <div class="message" data-phase="Letting Go / Sacrifice Phase">I sacrificed my old self to make room for the new.</div>
    <div class="message" data-phase="Letting Go / Sacrifice Phase">I embraced the change, the growth, the freedom.</div>

    <div class="message" data-phase="Reconciliation / Current Phase">And here I am, today.</div>
    <div class="message" data-phase="Reconciliation / Current Phase">Stronger, wiser, and at peace.</div>
    <div class="message" data-phase="Reconciliation / Current Phase">I learned that every ending is a new beginning.</div>
    <div class="message" data-phase="Reconciliation / Current Phase">And that love, true love, never fades away.</div>
    <div class="message" data-phase="Reconciliation / Current Phase">It transforms, it evolves, it remains.</div>
    </div>
    <div id="phaseTransition">
        <div class="phase-title phase-title-overlay" id="phaseTitleOverlay">Starting</div>
    </div>
    <div class="phase-title phase-title-fixed" id="phaseTitleFixed">Starting</div>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // Retrieve all message elements
        const messages = Array.from(document.querySelectorAll('.message'));
        
        // Group messages by phase
        const phaseOrder = [
            "Starting",
            "Kid Phase",
            // "Secret Spread Phase" was in the logic but not in the HTML, removed for consistency
            "Truth Revealed Phase",
            "Fake Account Phase",
            "Flirty / Fun Phase",
            "Dark Phase",
            "Self-Blame / Reflection Phase",
            "Rebuilding Phase",
            "Letting Go / Sacrifice Phase",
            "Reconciliation / Current Phase"
        ];

        // Color mapping for background and text
        const phaseColors = {
            "Starting": { bg: "#FFA552", text: "#3E2C1C" },
            "Kid Phase": { bg: "#FFD1B3", text: "#4B2E20" },
            "Secret Spread Phase": { bg: "#E76F51", text: "#FFF9F5" }, // Kept color for completeness
            "Truth Revealed Phase": { bg: "#D72638", text: "#FAF3F0" },
            "Fake Account Phase": { bg: "#8E7AB5", text: "#FFFFFF" },
            "Flirty / Fun Phase": { bg: "#FF8DC7", text: "#2D2D2D" },
            "Dark Phase": { bg: "#4A4E69", text: "#F1F1F1" },
            "Self-Blame / Reflection Phase": { bg: "#7B9E89", text: "#FDFCFB" },
            "Rebuilding Phase": { bg: "#2A9D8F", text: "#FFFFFF" },
            "Letting Go / Sacrifice Phase": { bg: "#264653", text: "#E9ECEF" },
            "Reconciliation / Current Phase": { bg: "#F4A261", text: "#3F2E25" }
        };

        // --- Phase Index Mapping ---
        const phases = {};
        messages.forEach((msg, idx) => {
            const phase = msg.getAttribute('data-phase');
            if (!phases[phase]) phases[phase] = [];
            phases[phase].push(idx);
        });

        let currentIdx = 0; // Global index of the currently shown message
        let currentPhaseIdx = 0; // Index of the currently active phase in phaseOrder

        // --- Phase Transition Logic (UPDATED) ---
        function showPhaseTransition(phase, callback) {
            const overlay = document.getElementById('phaseTransition');
            const titleOverlay = document.getElementById('phaseTitleOverlay');
            const titleFixed = document.getElementById('phaseTitleFixed');
            const colors = phaseColors[phase] || { bg: '#fff', text: '#222' };

            // Update overlay and fixed title colors/text
            overlay.style.setProperty('--phase-color', colors.bg);
            titleOverlay.textContent = phase;
            titleOverlay.style.color = colors.text;
            titleFixed.textContent = phase;
            titleFixed.style.color = colors.text;
            titleFixed.style.background = colors.bg; // Ensure fixed title reflects new phase color slightly

            // Animation sequence
            // 1. Show the background transition
            overlay.classList.add('show');
            
            // 2. Start the title animation shortly after showing the overlay
            setTimeout(() => {
                titleOverlay.classList.add('shrink-to-corner');
            }, 50);

            // 3. Complete the transition and call the callback (2100ms total duration)
            setTimeout(() => {
                // Reset the overlay title's state
                titleOverlay.classList.remove('shrink-to-corner');
                // Hide the background overlay
                overlay.classList.remove('show');
                if (callback) callback();
            }, 2100);
        }

        // --- Message Display Logic ---
        function showMessage(idx) {
            // Ensure index is valid
            if (idx < 0 || idx >= messages.length) return;

            messages.forEach(m => m.classList.remove('visible'));
            messages[idx].classList.add('visible');
            
            // Update global index
            currentIdx = idx; 
            
            // Change theme color and update sidebar
            const phase = messages[idx].getAttribute('data-phase');
            const colors = phaseColors[phase] || { bg: '#f8f8f8', text: '#222' };
            document.body.style.backgroundColor = colors.bg;
            
            // Update fixed title color/text
            const titleFixed = document.getElementById('phaseTitleFixed');
            titleFixed.textContent = phase;
            titleFixed.style.color = colors.text;
            titleFixed.style.background = `rgba(0,0,0,0.22)`; // Reset fixed title background
            
            // Find the phase index for the current message
            currentPhaseIdx = phaseOrder.indexOf(phase);
            
            updateSkipPhase();
            updatePhaseList();
        }

        // --- Sidebar Update Logic ---
        function updateSkipPhase() {
            const nextPhase = phaseOrder[currentPhaseIdx + 1] || phaseOrder[0];
            document.getElementById('nextPhaseName').textContent = nextPhase;
        }

        function updatePhaseList() {
            const phaseList = document.getElementById('phaseList');
            phaseList.innerHTML = '';
            phaseOrder.forEach((phase, index) => {
                const item = document.createElement('div');
                item.textContent = phase;
                item.style.fontWeight = currentPhaseIdx === index ? '700' : '400';
                item.style.color = currentPhaseIdx === index ? '#e91e63' : '#222';
                phaseList.appendChild(item);
            });
        }

        // --- Advance Message Logic ---
        function advanceMessage() {
            let nextIdx = currentIdx + 1;
            
            if (nextIdx >= messages.length) {
                // Story finished: loop back to the first message of the 'Starting' phase
                nextIdx = phases["Starting"][0];
                currentPhaseIdx = 0;
                showMessage(nextIdx);
                return;
            }

            const currentPhase = messages[currentIdx].getAttribute('data-phase');
            const nextMessagePhase = messages[nextIdx].getAttribute('data-phase');
            
            if (currentPhase !== nextMessagePhase) {
                // Phase transition needed
                const newPhase = nextMessagePhase;
                currentPhaseIdx = phaseOrder.indexOf(newPhase); 
                
                showPhaseTransition(newPhase, () => {
                    showMessage(nextIdx);
                });
            } else {
                // Same phase, just advance message
                showMessage(nextIdx);
            }
        }
        
        // Add click event to advance message when clicking anywhere on the page
        document.body.addEventListener('click', advanceMessage);

        // --- Skip Phase Button Listener ---
        document.getElementById('skipBtn').addEventListener('click', (e) => {
            e.stopPropagation(); 
            let nextPhaseIdx = (currentPhaseIdx + 1) % phaseOrder.length;
            const nextPhase = phaseOrder[nextPhaseIdx];

            showPhaseTransition(nextPhase, () => {
                const firstMessageIdx = phases[nextPhase][0];
                showMessage(firstMessageIdx);
            });
        });

  
        document.getElementById('skipBtn').addEventListener('mouseenter', () => {
            document.getElementById('phaseList').classList.add('show');
        });

        document.querySelector('.skip-controls').addEventListener('mouseleave', () => {
            document.getElementById('phaseList').classList.remove('show');
        });

        document.querySelector('.skip-controls').addEventListener('click', (e) => {
            e.stopPropagation();
        });
        document.getElementById('musicPlayer').addEventListener('click', (e) => {
            e.stopPropagation();
        });


       
        showMessage(0);
    });
</script>

 </body>
</html>